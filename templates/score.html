<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="../static/css/index.css">
    <script src="../static/js/apexcharts.js"></script>
</head>

<body>
    <div class="content">
        <div class="head">
            <div class="logo">
                <img src="../static/img/logo.png" style="width: 50px;">
            </div>
            <div class="title">数据分析</div>
            <div class="nav">
                <a href="index">首页</a>
                <a href="movie">目录</a>
                <a href="score">数据分析</a>
                <a href="cloud">词云</a>
            </div>
            <div class="nav_footer nav_footer3"></div>
        </div>
        <br>
        <div id="chart"></div>
    </div>

<script type="module">

let getArr = []
let getArr1 = []
        {% for data in movies %}
            getArr.push({[ data[5] ]})
        {% endfor %}
        {% for data in movies %}
            getArr1.push("{[ data[9] ]}")
        {% endfor %}
        function resultArr(getArr) {
            let answer = {};
            getArr.forEach((element) => {
                if (!answer[element]) {
                    answer[element] = 1;
                }
                else {
                    answer[element]++;
                }
            });
            return answer;
        }
        console.log(resultArr(getArr))
        console.log(resultArr(getArr1))


        let options = {
          series: [{
          name: 'Income',
          type: 'column',
          data: [1.4, 2, 2.5, 1.5, 2.5, 2.8, 3.8, 4.6]
        }, {
          name: 'Cashflow',
          type: 'column',
          data: [1.1, 3, 3.1, 4, 4.1, 4.9, 6.5, 8.5]
        }, {
          name: 'Revenue',
          type: 'line',
          data: [20, 29, 37, 36, 44, 45, 50, 58]
        }],
          chart: {
          height: 700,
          type: 'line',
          stacked: false
        },
        dataLabels: {
          enabled: false
        },
        stroke: {
          width: [1, 1, 4]
        },
        title: {
          text: 'XYZ - Stock Analysis (2009 - 2016)',
          align: 'left',
          offsetX: 110
        },
        xaxis: {
          categories: [2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016],
        },
        yaxis: [
          {
            axisTicks: {
              show: true,
            },
            axisBorder: {
              show: true,
              color: '#008FFB'
            },
            labels: {
              style: {
                colors: '#008FFB',
              }
            },
            title: {
              text: "Income (thousand crores)",
              style: {
                color: '#008FFB',
              }
            },
            tooltip: {
              enabled: true
            }
          },
          {
            seriesName: 'Income',
            opposite: true,
            axisTicks: {
              show: true,
            },
            axisBorder: {
              show: true,
              color: '#00E396'
            },
            labels: {
              style: {
                colors: '#00E396',
              }
            },
            title: {
              text: "Operating Cashflow (thousand crores)",
              style: {
                color: '#00E396',
              }
            },
          },
          {
            seriesName: 'Revenue',
            opposite: true,
            axisTicks: {
              show: true,
            },
            axisBorder: {
              show: true,
              color: '#FEB019'
            },
            labels: {
              style: {
                colors: '#FEB019',
              },
            },
            title: {
              text: "Revenue (thousand crores)",
              style: {
                color: '#FEB019',
              }
            }
          },
        ],
        tooltip: {
          fixed: {
            enabled: true,
            position: 'topLeft', // topRight, topLeft, bottomRight, bottomLeft
            offsetY: 30,
            offsetX: 60
          },
        },
        legend: {
          horizontalAlign: 'left',
          offsetX: 40
        }
        };

        let chart = new ApexCharts(document.querySelector("#chart"), options);
        chart.render();

</script>

    <script src="../static/js/index.js"></script>
</body>

</html>